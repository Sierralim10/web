<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Lluvia de Estrellas con Sonido y Cubo Interactivo</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
    <style>
      body {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <a-scene physics="gravity: 0 -9.8 0">
      <!-- Cielo con imagen 360 del espacio -->
      <a-sky src="sky.jpg"></a-sky>

      <!-- Estrellas -->
      <a-entity id="star-container"></a-entity>

      <!-- Sonido de fondo -->
      <a-sound 
        src="song.mp3"
        autoplay="true"
        loop="true"
        volume="0.5"
      ></a-sound>

      <!-- Cubo interactivo -->
      <a-box 
        position="0 1 -3" 
        depth="0.5" 
        height="0.5" 
        width="0.5" 
        color="#4CC3D9"
        dynamic-body
        grabbable
        material="shader: flat"
      ></a-box>

      <!-- Cámara con cursor -->
      <a-camera position="0 1.6 0">
        <a-cursor></a-cursor>
      </a-camera>

      <script>
        // Crear estrellas
        const starContainer = document.querySelector('#star-container');
        const numStars = 100; // Número de estrellas
        const sceneHeight = 10; // Altura de la escena

        for (let i = 0; i < numStars; i++) {
          // Crear una nueva estrella
          const star = document.createElement('a-sphere');
          star.setAttribute('radius', '0.05');
          star.setAttribute('color', '#FFF');
          
          // Posición aleatoria
          const x = (Math.random() - 0.5) * 10;
          const y = Math.random() * sceneHeight + 5; // Empezar más arriba
          const z = (Math.random() - 0.5) * 10;
          star.setAttribute('position', `${x} ${y} ${z}`);
          
          // Animación de caída
          const fallDuration = Math.random() * 5000 + 5000; // Duración aleatoria
          star.setAttribute('animation', `
            property: position;
            to: ${x} -5 ${z};
            dur: ${fallDuration};
            easing: linear;
            loop: true;
          `);

          // Añadir la estrella al contenedor
          starContainer.appendChild(star);
        }
      </script>
    </a-scene>
  </body>
</html>

